{
  "routing_model": {
    "APPOINTMENT": ["DETAILS"],
    "DETAILS": ["SUMMARY"],
    "SUMMARY": ["SUCCESS"],
    "SUCCESS": []
  },
  "data_api_version": "3.0",
  "version": "7.3",
  "screens": [
    {
      "id": "APPOINTMENT",
      "title": "Agendar Cita",
      "data": {
        "department": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": {"type": "string"},
              "title": {"type": "string"}
            }
          },
          "__example__": [
            {"id": "tasacion", "title": "üíé Tasaci√≥n de Joyas"},
            {"id": "dise√±o_personalizado", "title": "‚ú® Dise√±o Personalizado"},
            {"id": "reparacion", "title": "üîß Reparaci√≥n de Joyas"},
            {"id": "compra_presencial", "title": "üõçÔ∏è Asesor√≠a de Compra"},
            {"id": "limpieza", "title": "‚ú® Limpieza y Mantenimiento"}
          ]
        },
        "location": {
          "type": "array", 
          "items": {
            "type": "object",
            "properties": {
              "id": {"type": "string"},
              "title": {"type": "string"}
            }
          },
          "__example__": [
            {"id": "cartagena", "title": "üìç Cartagena"},
            {"id": "santa_marta", "title": "üìç Santa Marta"}
          ]
        },
        "is_location_enabled": {
          "type": "boolean",
          "__example__": true
        },
        "date": {
          "type": "array",
          "items": {
            "type": "object", 
            "properties": {
              "id": {"type": "string"},
              "title": {"type": "string"}
            }
          },
          "__example__": [
            {"id": "2025-09-24", "title": "Ma√±ana - 24 Sep"},
            {"id": "2025-09-25", "title": "Mi√©rcoles - 25 Sep"},
            {"id": "2025-09-26", "title": "Jueves - 26 Sep"}
          ]
        },
        "is_date_enabled": {
          "type": "boolean",
          "__example__": true
        },
        "time": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": {"type": "string"},
              "title": {"type": "string"},
              "enabled": {"type": "boolean"}
            }
          },
          "__example__": [
            {"id": "09:00", "title": "9:00 AM", "enabled": true},
            {"id": "10:00", "title": "10:00 AM", "enabled": true},
            {"id": "11:00", "title": "11:00 AM", "enabled": false},
            {"id": "14:00", "title": "2:00 PM", "enabled": true}
          ]
        },
        "is_time_enabled": {
          "type": "boolean",
          "__example__": true
        }
      },
      "layout": {
        "type": "SingleColumnLayout",
        "children": [
          {
            "type": "Form",
            "name": "appointment_form",
            "children": [
              {
                "type": "TextHeading",
                "text": "üíé Joyer√≠a Rimer"
              },
              {
                "type": "TextBody", 
                "text": "Agenda tu cita personalizada con nuestros expertos joyeros"
              },
              {
                "type": "Dropdown",
                "label": "¬øQu√© servicio necesitas?",
                "name": "department",
                "data-source": "${data.department}",
                "required": true,
                "on-select-action": {
                  "name": "data_exchange",
                  "payload": {
                    "trigger": "department_selected",
                    "department": "${form.department}"
                  }
                }
              },
              {
                "type": "Dropdown",
                "label": "¬øEn qu√© sede?", 
                "name": "location",
                "data-source": "${data.location}",
                "required": "${data.is_location_enabled}",
                "enabled": "${data.is_location_enabled}",
                "on-select-action": {
                  "name": "data_exchange",
                  "payload": {
                    "trigger": "location_selected",
                    "department": "${form.department}",
                    "location": "${form.location}"
                  }
                }
              },
              {
                "type": "Dropdown",
                "label": "¬øQu√© fecha prefieres?",
                "name": "date", 
                "data-source": "${data.date}",
                "required": "${data.is_date_enabled}",
                "enabled": "${data.is_date_enabled}",
                "on-select-action": {
                  "name": "data_exchange",
                  "payload": {
                    "trigger": "date_selected",
                    "department": "${form.department}",
                    "location": "${form.location}",
                    "date": "${form.date}"
                  }
                }
              },
              {
                "type": "Dropdown",
                "label": "¬øA qu√© hora?",
                "name": "time",
                "data-source": "${data.time}",
                "required": "${data.is_time_enabled}",
                "enabled": "${data.is_time_enabled}"
              },
              {
                "type": "Footer",
                "label": "Continuar",
                "on-click-action": {
                  "name": "navigate",
                  "next": {
                    "type": "screen",
                    "name": "DETAILS"
                  },
                  "payload": {
                    "department": "${form.department}",
                    "location": "${form.location}",
                    "date": "${form.date}",
                    "time": "${form.time}"
                  }
                }
              }
            ]
          }
        ]
      }
    },
    {
      "id": "DETAILS",
      "title": "Tus Datos",
      "data": {
        "department": {
          "type": "string",
          "__example__": "tasacion"
        },
        "location": {
          "type": "string",
          "__example__": "cartagena"
        },
        "date": {
          "type": "string",
          "__example__": "2025-09-24"
        },
        "time": {
          "type": "string",
          "__example__": "10:00"
        }
      },
      "layout": {
        "type": "SingleColumnLayout",
        "children": [
          {
            "type": "Form",
            "name": "details_form",
            "children": [
              {
                "type": "TextHeading",
                "text": "Informaci√≥n de Contacto"
              },
              {
                "type": "TextBody",
                "text": "Para confirmar tu cita necesitamos algunos datos"
              },
              {
                "type": "TextInput",
                "label": "¬øC√≥mo te llamas?",
                "name": "name",
                "required": true,
                "helper-text": "Tu nombre completo"
              },
              {
                "type": "TextInput",
                "label": "Email",
                "name": "email", 
                "input-type": "email",
                "required": true,
                "helper-text": "Para enviarte la confirmaci√≥n"
              },
              {
                "type": "TextInput",
                "label": "Tel√©fono",
                "name": "phone",
                "input-type": "phone", 
                "required": true,
                "helper-text": "Para contactarte si es necesario"
              },
              {
                "type": "TextArea",
                "label": "Detalles adicionales",
                "name": "more_details",
                "helper-text": "Cu√©ntanos m√°s sobre lo que necesitas (opcional)",
                "required": false
              },
              {
                "type": "Footer",
                "label": "Revisar Cita",
                "on-click-action": {
                  "name": "data_exchange",
                  "payload": {
                    "department": "${data.department}",
                    "location": "${data.location}",
                    "date": "${data.date}",
                    "time": "${data.time}",
                    "name": "${form.name}",
                    "email": "${form.email}",
                    "phone": "${form.phone}",
                    "more_details": "${form.more_details}"
                  }
                }
              }
            ]
          }
        ]
      }
    },
    {
      "id": "SUMMARY",
      "title": "Confirmar Cita",
      "terminal": true,
      "data": {
        "appointment": {
          "type": "string",
          "__example__": "üíé Tasaci√≥n de Joyas\nüìç Cartagena\nüìÖ 24 de Septiembre, 2025\nüïí 10:00 AM"
        },
        "details": {
          "type": "string",
          "__example__": "üë§ Mar√≠a Garc√≠a\nüìß maria@email.com\nüì± +57 300 123 4567\nüìù Tengo un anillo de oro que necesita tasaci√≥n"
        },
        "department": {
          "type": "string",
          "__example__": "tasacion"
        },
        "location": {
          "type": "string",
          "__example__": "cartagena"
        },
        "date": {
          "type": "string",
          "__example__": "2025-09-24"
        },
        "time": {
          "type": "string",
          "__example__": "10:00"
        },
        "name": {
          "type": "string",
          "__example__": "Mar√≠a Garc√≠a"
        },
        "email": {
          "type": "string",
          "__example__": "maria@email.com"
        },
        "phone": {
          "type": "string",
          "__example__": "+57 300 123 4567"
        },
        "more_details": {
          "type": "string",
          "__example__": "Tengo un anillo de oro que necesita tasaci√≥n"
        },
        "terms_accepted": {
          "type": "boolean",
          "__example__": true
        },
        "privacy_accepted": {
          "type": "boolean",
          "__example__": true
        }
      },
      "layout": {
        "type": "SingleColumnLayout",
        "children": [
          {
            "type": "Form",
            "name": "confirmation_form",
            "children": [
              {
                "type": "TextHeading",
                "text": "üóìÔ∏è Resumen de tu Cita"
              },
              {
                "type": "TextBody",
                "text": "${data.appointment}"
              },
              {
                "type": "TextHeading",
                "text": "üë§ Tus Datos"
              },
              {
                "type": "TextBody",
                "text": "${data.details}"
              },
              {
                "type": "OptIn",
                "name": "terms",
                "label": "Acepto los t√©rminos y condiciones de Joyer√≠a Rimer",
                "required": true
              },
              {
                "type": "OptIn",
                "name": "privacy_policy",
                "label": "Autorizo el tratamiento de mis datos personales conforme a la Pol√≠tica de Privacidad de Joyer√≠a Rimer para fines de agendamiento y contacto",
                "required": true
              },
              {
                "type": "Footer",
                "label": "‚úÖ Confirmar Cita",
                "on-click-action": {
                  "name": "data_exchange",
                  "payload": {
                    "department": "${data.department}",
                    "location": "${data.location}",
                    "date": "${data.date}",
                    "time": "${data.time}",
                    "name": "${data.name}",
                    "email": "${data.email}",
                    "phone": "${data.phone}",
                    "more_details": "${data.more_details}",
                    "terms_accepted": "${form.terms}",
                    "privacy_accepted": "${form.privacy_policy}"
                  }
                }
              }
            ]
          }
        ]
      }
    },
    {
      "id": "SUCCESS",
      "title": "¬°Cita Confirmada!",
      "data": {
        "success_message": {
          "type": "string",
          "__example__": "¬°Tu cita ha sido confirmada exitosamente!"
        },
        "appointment_details": {
          "type": "string",
          "__example__": "üìã Referencia: JR12345678\nüíé Servicio: Tasaci√≥n de Joyas\nüìç Sede: Cartagena\nüìÖ Fecha: 24 de Septiembre, 2025\nüïí Hora: 10:00 AM"
        }
      },
      "layout": {
        "type": "SingleColumnLayout",
        "children": [
          {
            "type": "TextHeading",
            "text": "‚úÖ ¬°Listo!"
          },
          {
            "type": "TextBody",
            "text": "${data.success_message}"
          },
          {
            "type": "TextBody",
            "text": "${data.appointment_details}"
          },
          {
            "type": "TextBody",
            "text": "üìû Te contactaremos pronto para confirmar los detalles.\n\nüíé ¬°Gracias por confiar en Joyer√≠a Rimer!"
          }
        ]
      }
    }
  ]
}